## ADS125P08 Example Code

The following example code project is intended to run on a TI MSPM0L1306 Lauchpad.  This project utilizes a Hardware Abstraction Layer (HAL) and can be ported to other processors by making use of the HAL.c / HAL.h files.  

## Peripherals & Pin Assignments

Visit [LP_MSPM0L1306](https://www.ti.com/tool/LP-MSPM0L1306) for LaunchPad information, including user guide and hardware files.

| Peripheral | Pin | Function |
| --- | --- | --- |
| SPI0 | PA6 | SPI SCLK (Clock) |
| SPI0 | PA5 | SPI PICO (Peripheral In, Controller Out) |
| SPI0 | PA4 | SPI POCI (Peripheral Out, Controller In) |
| SPI0 | PA23 | SPI CS1 (Chip Select 1) |
| GPIO | PA22 | DRDYn ( Data Ready |)

The included example applications executes a few simple data collection routines.  The main file **main_nortos.c** contains 3 example collection routines.  Each routine configures the ADC with unique settings and collects a number of samples in a constantly running loop.

```C 
    simpleADC();           // A simple, single channel data converter example
    sequencerExample();    // Channel scanning example using the sequencer
    FIFOexample();         // Data retreival using the FIFO
```





## ADC Configuration Code Generation Tool
 Visit [PADC Design Calculator](https://dev.ti.com/gallery/view/PADC/PADC_Design_Calculator_Tool/?device=ADS125P08) to use the Sequence Configuration tool

**Example:**
```C
// Generated by the ADS125P08 Sequencer Configuration Tool on 1/8/2026, 3:55:30 PM

#define ARRAY_SIZE(arr) (sizeof(arr) / sizeof((arr)[0]))
#define EXT_CLK_FREQ_MHZ (25.6) // Define a value between 0.5 and 26.2

/* Type definitions */
typedef struct {
    const uint8_t addr;
    const uint8_t value;
} RegisterConfig;

typedef struct {
    const uint8_t pageNumber;
    const RegisterConfig *configPointer;
    const int registerCount;
} PageConfig;

/* Global page */
RegisterConfig global_page_config[] = {
{ .addr = 0x13, .value = 0x00 }, // REFERENCE_CFG
};

RegisterConfig step0_config[] = {
{ .addr = 0x03, .value = 0x0B }, // STEP0_FLTR1_CFG,
{ .addr = 0x0B, .value = 0x01 }, // STEP0_OW_SYSMON_CFG
};

PageConfig ADS125P08_sequencer_config[] = {
    { .pageNumber = 0x00, .configPointer = global_page_config, .registerCount = ARRAY_SIZE(global_page_config) },
{ .pageNumber = 0x01, .configPointer = step0_config, .registerCount = ARRAY_SIZE(step0_config)}
};

#define SEQUENCE_SIZE (ARRAY_SIZE(ADS125P08_sequencer_config))
```

These register configurations are loaded into the ADC by using the ``` initADC(); ``` function. 


## Example Code Functions


```C
uint8_t getRegisterValue(uint8_t page, uint8_t address);
void initADC(void);
void powerDownMode(void);
void activeMode(void);
bool resetDevice(void);
void startAdcConversion(void);
void stopAdcConversion(void);
REG_IO readSingleRegister(uint8_t page, uint8_t address);
REG_IO writeSingleRegister(uint8_t page, uint8_t address, uint8_t data);
STATUS_IO checkStatus(void);
ADC_IO readData(void);
ADC_IO readFIFO(void);
int32_t signExtend(const uint8_t dataBytes[]);
void enableRegisterMapCrc(bool enable);
bool isValidCrcOut(void);
```
Structures used for communication with device registers, FIFO, or retrieving ADC conversions include: 
## Typedefs ##
```C
 typedef struct {
    uint8_t STATUS_MSB;
    uint8_t STATUS_LSB;
    uint8_t ADC_REF;
    uint8_t DIGITAL_STATUS;
    uint8_t FIFO;
    bool errorPresent;
 } ADC_STATUS;

 typedef struct {
    uint32_t    ADC_reading;
    uint32_t    FIFO_reading;
    uint8_t     Register_data;
    uint8_t    STATUS_MSB;
    uint8_t    STATUS_LSB;
    bool        CRC_Valid;
 } ADC_IO;

 typedef struct {
   uint8_t STATUS_MSB;
   uint8_t STATUS_LSB;
   uint8_t Register_data;
   bool    CRC_Valid;
 } REG_IO;
```
## Register Macros
Included in this example code are register definition macros.  These macros are intended to provide easy to read short cuts to defined register values. 

```C
/* Register 0x00 (DEVICE_ID) definition
 * |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
 * |        Bit 7        |        Bit 6        |        Bit 5        |        Bit 4        |        Bit 3        |        Bit 2        |        Bit 1        |        Bit 0        |
 * |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
 * |               RESERVED[1:0]               |                CH_CNT[1:0]                |                                      DEV_ID[3:0]                                      |
 * |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
 */

    /* DEVICE_ID register */
    #define DEVICE_ID_ADDRESS									((uint8_t) 0x00)
    #define DEVICE_ID_DEFAULT									((uint8_t) 0x30)

    /* CH_CNT field */
    #define CH_CNT_MASK											((uint8_t) 0x30)
    #define DEVICE_ID_CH_CNT_BITOFFSET							(4)

    /* DEV_ID field */
    #define DEV_ID_MASK											((uint8_t) 0x0F)
    #define DEVICE_ID_DEV_ID_BITOFFSET							(0)
    #define DEVICE_IS_16_BIT_MASK                               ((uint8_t) 0x04)
```